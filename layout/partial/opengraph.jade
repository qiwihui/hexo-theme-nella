-
    var metas = {};
mixin og(name, value)
    - metas[name] = value;

if 'og_site_name' in theme && theme.og_site_name
    +og('og:site_name', theme.og_site_name)
else
    +og('og:site_name', config.title)

+og('og:url', url)

if 'og_title' in page && page.og_title
    +og('og:title', page.og_title)
else if page.title
   +og('og:title', page.title)
else if is_tag()
   +og('og:title', __('posts_with_tag') + ' «' + page.tag + '»')
else if is_home()
   +og('og:title', config.title)

-
    var description = theme.description; // default to the blog description
    if (_.has(page, 'og_description') && page.og_description){
        description = page.og_description;
    }else if(_.has(page, 'description') && page.description){
        description = page.description;
    }
+og('og:description', description)

if is_post()
    +og('og:type', 'article')
    if 'profile_href' in theme && theme.profile_href
        +og('article:author', theme.profile_href)

if 'og_image' in page && page.og_image
    if 'post_asset_folder' in theme && theme.post_asset_folder
        //- sorry for that shit, but hexo URL generating is so fucking stupid
        -
            var src = config.root + page.path + page.og_image;
            src = src.replace(/\/\//, '/');
        +og('og:image', config.url + src)
    else
        +og('og:image', page.og_image)

if is_home() && 'admin_id' in theme && theme.admin_id
    +og('fb:admin_id', theme.admin_id)

if 'admin_id' in theme && theme.admin_id
    +og('fb:profile_id', theme.admin_id)

each value, name in metas
    meta(property= name, content= value)